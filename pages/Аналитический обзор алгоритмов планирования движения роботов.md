# Обозначения и определения
При решении робототехнических задач стандартно выделяют два пространства, в котором возможно планирование движения роботов:
    а) конфигурационное пространство $Q$ --- пространство состояний робота (его размерность $n$ при этом равна числу степеней свободы робота),
    б) операционное пространство $W$ --- пространство, в котором описываются задачи манипулирования.
Стоит отметить, что данные пространства в большинстве задач представляют собой гладкие многообразия. К примеру, конфигурационное пространство манипулятора оказывается тором, а положение предмета в пространстве является специальной Евклидовой группой $\mathrm{SE}(3)$. Решение задач, связанных с этими многообразиями, подразумевает их локальное координатное рассмотрение, называемое картами. Между этими двумя многообразиями существует отображение $F$ (Рисунок \ref{fig:FK}), которое определяет для каждого состояния в $Q$ некоторое положение в $W$ и называется прямой задачей кинематики. 
\begin{figure}
  [H]
  \centering
  \incfig[0.9]{diag_1}
  % \includegraphics[width=0.7\textwidth]{fk.png}
  \caption{Задача прямой кинематики и карты многообразий}
  \label{fig:FK}
\end{figure}

Для возврата из операционного в конфигурационное можно рассматривать обратное отображение $F^{-1}$, которое дает решение обратной задачи кинематики. При этом зачастую одному положению робота в $W$ могут соответствовать одинаковые состояния в $Q$, что создает сложности в задании непрерывного обратного отображения. Такие ситуации наблюдаются, например, в избыточных системах, то есть в таких, размерность конфигурационного пространства которых превышает размерность операционного $\mathrm{dim}(Q) > \mathrm{dim}(W)$. В таком случае отображение $F^{-1}$ не является инъективным. Соответственно, планирование в операционном пространстве сопряжено с последующими сложностями поиска движения в конфигурационном пространстве. Именно поэтому задачу часто решают сразу в конфигурационном пространстве, и в данной работе рассматриваются именно методы планировании в конфигурационном пространстве.
- # Планирование движения
  Обычно при движении роботу необходимо обходить препятствия $O_i$, сужающие конфигурационное пространство до подпространства $Q_{free} = Q \setminus (\bigcup\limits_{i} O_i)$. При этом данное подмногообразие в большинстве случаев оказывается сложно задать в явном виде, поэтому методы планирования используют различные структуры для обработки и ограничения движения в точках расположения препятствия.
  
  Задача планирования движения в конфигурационном пространстве заключается в нахождении пути $\alpha: [0,1] \to Q_{free}$ между заданными точками (Рисунок \ref{fig:path_in_Q}) и последующим управлением системой $U$, реализующим движение по данному пути.
  \begin{figure}
    [H]
    \centering
    % \includegraphics[width=0.7\textwidth]{fk.png}
    \incfig[0.5]{diag_2}
    \caption{Путь в конфигурационном пространстве, обходящий препятствия}
    \label{fig:path_in_Q}
  \end{figure}
- # Классические методы
  Классические методы движения с обходом препятствий используют оптимизацию с ограничениями или потенциальные поля. Для реализации первого необходимо задать метод численной оптимизации (например, последовательную выпуклую оптимизацию) и способ проверки коллизий, за которые оптимизируемый функционал будет увеличиваться. Однако большое количество задач невозможно задать в рамках выпуклой оптимизации, что усложняет численное решение задачи и более того делает ее сильно зависящей от начальных условий. При этом, имея дело с многообразиями, вычисления проводятся лишь в локальном представлении, то проверка коллизий оказывается либо трудновычислительной задачей, либо вовсе не дает реалистичного представления препятствий. Чтобы побороть последнюю проблему Боналли в \cite{bonalli_trajectory_2019} предложил перенести рассмотрение коллизий напрямую в структуре многообразий. Огромным достоинством метода на основе оптимизации является оптимальный (согласно поставленному критерию) путь. Именно поэтому зачастую оптимизационную задачу добавляют поверх других методов, чтобы обеспечить выбор, например, кратчайшего или затрачивающего минимальные энергетические затраты пути.
  В подходе с использованием потенциальных полей в пространство движения искусственно добавляется поле сил. Причем для целевой позиции используются притягивающие силы, а препятствия являются отталкивающими точками. Движение вдоль этого поля позволяет избегать препятствий и дойти до необходимого положения, являющегося минимумом. Такой подход оказывается прост в реализации и легковычислим. Однако, как указано у Чжоу в \cite{zhou_review_2022}, движение может оказаться колебательным и неестественным, но главное --- поле может иметь локальные минимумы, а значит робот остановится не в той точке и не сможет из нее выйти. В связи с этим много исследований посвящено поиску методов избегания локальных минимумов или выхода из них. Чжан в своей работе \cite{zhang_new_2017} предлагает использовать скользящее окно, чтобы разбить задачу глобального планирования на решение задач в этих окнах. В силу перехода к локальному планированию становится возможным построить потенциальное поле без локальных минимумов. Другая идея представлена у Юнга в \cite{jung_local_2020}. Он добавляет дополнительное поле, учитывающее близко расположенные друг у друга препятствия, которые могут образовать локальный минимум. Такой подход действительно позволяет иметь один минимум, однако делает правильное задание этих полей достаточно трудной задачей.
  
  Большую популярность также имеют методы на основе сэмплирования. В их основе лежит идея получения свободных от коллизий конфигураций робота, представленных в виде графа или другой структуры, описывающей состояния системы и связь между ними. На полученном графе в дальнейшем ищется кратчайший путь. Такие методы обычно обладают, так называемой, вероятностной полнотой: вероятность найти решение поставленной задачи стремится к 1 с увеличением времени поиска. Самыми распространенными примерами являются RRT и PRM, а также их модификации. Ортей в своей работе \cite{orthey_sampling-based_2023} подробно разбирает и классифицирует различные подходы, основанные на сэмплировании. Данные методы очень часто применяются на практике благодаря своим свойствам и легковычислимости, однако из-за планирования всей траектории движения наперед становятся неприменимыми (или требующими сильных модификаций) в динамической среде или в случае неточностей в знаниях о препятствиях.
  
  К тому же, в отдельный класс решений можно выделить методы, использующие машинное обучение. Большинство из них использует описанные выше методы или их комбинации в своей основе, но позволяет ускорить вычисление. Однако есть и методы на основе глубоких нейронных сетей и обучения с подкреплением (\cite{bae_multi-robot_2019}, \cite{isele_navigating_2018}). Преследуя идею нахождения детерминированного решения с доказанной сходимостью, мы не будем рассматривать методы на основе машинного обучения в данной работе и оставим их на будущее рассмотрение.
- # Геометрические подходы
  Совершенно другим по своей сути подходом является использование геометрии пространства для описания поставленных ограничений. Так, используя метрики из дифференциальной геометрии, можно уйти от добавления искусственных сил. К примеру, корректно определенная Риманова метрика способна, фактически, искривлять пространство в окрестности препятствия, за счет чего обеспечивать естественное поведение робота. Однако введенная на касательном к операционному пространству $TW$ метрика позволяет найти траекторию движения лишь на $W$. И вопрос перехода к конфигурационному пространству остается большой задачей.
  Одним из первых примеров использования такого рода метрик является работа Рэтлиффа \cite{ratliff_riemannian_2018} (далее RMP). Предложенная идея с использованием пулбэка вместо обращения прямой кинематики для "стягивания" пути из операционного пространства в конфигурационное оказалась удачной в силу геометрически хорошо-определенного переноса структур в расслоение пулбэка. К примеру для пулбэка $(f^*TN, f^*\pi_N, f^*\mathrm{Id}_N)$ , определенного из коммутативности диаграммы \ref{fig:pullback},
  \begin{figure}
      [H]
      \centering
      % \includegraphics[width=0.4\textwidth]{pullback.png}
      \shorthandoff{"}%
      \begin{tikzcd}
          {f^*TN} && TN \\
          \\
          Q && N
          \arrow["{f^*\mathrm{Id}_N}"', from=1-1, to=1-3]
          \arrow["{f^*\pi_N}", from=1-1, to=3-1]
          \arrow["{\pi_N}"', from=1-3, to=3-3]
          \arrow["f", from=3-1, to=3-3]
      \end{tikzcd}
      \shorthandon{"}%
      \caption{Операция пулбэка расслоения $TN$}
      \label{fig:pullback}
  \end{figure}
  можно переносить понятия дифференциала, Римановой метрики, связности, сил и потенциальных полей до пространства $f^*TN$ . Это позволяет сформулировать задачу оптимизации на расслоении пулбэка (имея отображение в него из $TM$ в виде пулбэка дифференциала, и работы с путем из $TN$ с помощью пулбэка метрики и диссипативных и потенциальных сил), находя ускорение состояния робота, минимизирующее квадратичную задачу в $f^*TN$ , локально представимую как
  \[
      \ddot{q} = \underset{\ddot{q}}{\mathrm{argmin}}\sum\limits_i \frac{1}{2} \|\ddot{x}_i^d - J_{\varphi_i}\ddot{q}\|_{A_i}^2,
  \] где $\ddot{x}_i^d$ --- желаемое ускорение в $TN_i$, $J_{\varphi_i}$ --- якобиан в выбранной карте, $\ddot{q}$ --- искомое ускорение в $TQ$.
  
  Более того такой метод позволяет объединять несколько заданий в одну оптимальную задачу (в рамках задачи оптимизации), что делает его удобным для расширения и смешения нескольких планировщиков движения. А также предложенное явное решение для поставленной оптимизационной задачи позволяет иметь низкую вычислительную затратность, в связи с чем увеличение количества препятствий минимально влияет на скорость работы метода. Однако в данной работе не удалось полностью уйти от использования потенциальных полей, в связи с чем становятся возможными те же проблемы, что и в рассмотренных ранее методах. Что наиболее важно, при анализе геометрических свойств оказывается, что метод не дает геометрической стабильности. То есть при изменении задания карт многообразия кардинально изменяется построенная траектория (пример такого поведения представлен на рисунке \ref{fig:geom_consist}). Подробно про это свойство и причины его невыполнения в случае RMP рассмотрено Байлардом в \cite{bylard_composable_2021}. 
  \begin{figure}
    [H]
    \centering
    \includegraphics[width=0.5\textwidth]{pdfs/rmp.png}
    \caption{Пример нарушения геометрической стабильности из \cite{bylard_composable_2021} при движении по сфере. Построенные пути: (красный) всегда используя стереографическую проекцию без южного полюса, (синий) всегда используя стереографическую проекцию без северного полюса, (фиолетовый) переключение стереографических проекций в зависимости от текущего полушария}
    \label{fig:geom_consist}
  \end{figure}
  
  В попытках сохранения достоинств и решения проблем RMP Байлард в \cite{bylard_composable_2021} представил идею использования аналогичного подхода с выполнением свойства геометрической  устойчивости. Получившийся метод действительно наследует скорость вычислений благодаря явному решению, а также имеет достаточно простую реализацию. Однако в попытках получить геометрическую устойчивость оказалось невозможным использование метрик, зависящих от скорости. В связи с этим возникает сложность, например, с заданием ограничений на скорости на сочленениях манипулятора, а значит возможна недостижимая динамика, о чем говорится у Билларда в \cite{fichera_hybrid_2023}
  
  Дальнейшее развитие геометрические методы получили на примерах статей Рэтлиффа \cite{ratliff_optimization_2020} и Се \cite{xie_geometric_2020}. В них идея использования геометрии пространства поднимается до построения Финслеровой геометрии, которая является обобщением над Римановой метрикой. В данной работе будем исследовать лишь методы на основе Римановой метрики, оставляя более сложные идеи на будущее рассмотрение.
- # Выводы
  По итогам литературного обзора были введены необходимые определения и обозначения, а также сформулирована задача планирования движения на многообразиях. В разделе \ref{sec:classic} были рассмотрены наиболее используемые методы для решения поставленной задачи, кратко описаны принципы их работы и выделены основные преимущества и недостатки. Для этих методов рассмотрены модификации, предложенные за последние 10 лет, которые позволяют улучшить и избавить подход от описанных недостатков. В разделе \ref{sec:geom} показаны методы на основе геометрического подхода, которые являются основным вопросов исследования в выпускной квалификационной работе. Для них описана идея, а также теоретическая формулировка. Для выбранных методов описаны их известные достоинства, недостатки и ограничения, которые требуется рассмотреть в работе.
  
  По результатам обзора видно, что геометрические методы позволяют обеспечивать естественное поведение робота, а также переносить путь из операционного пространства в конфигурационное без решения обратной задачи кинематики. Это позволяет получать гладкие решения без анализа обратного отображения. Вместе с тем наличие аналитического решения оптимизационной задачи позволяет быстро вычислять траектории движения, что дает возможность адаптировать их к динамически изменяющимся условиям. В связи с этим далее в работе рассматриваются методы, основанные на Римановых метриках и операции пулбэка.